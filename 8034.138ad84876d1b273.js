"use strict";(self.webpackChunkRevenUWebApp=self.webpackChunkRevenUWebApp||[]).push([[8034],{98034:(P,d,t)=>{t.r(d),t.d(d,{MobilePreferencesViewModel:()=>u});var l=t(86739),r=t(8787),h=t(23823),C=t(49710),f=t(18569),c=t(95050);class u extends h.g{get SelectedRow(){return this.ConfigPreferenceGrid.SelectedItem}set SelectedRow(i){i!=this.ConfigPreferenceGrid.SelectedItem&&(this.ConfigPreferenceGrid.SelectedItem=i)}constructor(){super(),this.DeletedConfig=[],this.setGridFocus=!0,this.isConfig=!0,this.SNO=1}MobilePreferencesViewModel_1(i){let e;this.Title=i,this.DisplayName=this.Title,this.ConfigPreferenceGrid=new C.vv,this.ConfigPreferenceGrid.Height=600,this.ConfigPreferenceGrid.BeginEdit.Subscribe(this,"onBeginEdit"),this.ConfigPreferenceGrid.Columns=[],this.ConfigPreferenceGrid.Width="",this.ConfigPreferenceGrid.CanUserAddRows=!0,this.ConfigPreferenceGrid.CanUserDeleteRows=!0,e=new f.O7,e.Header=l.d.GetResource("DocumentDesigner_Sno"),e.DisplayMember="Sno",e.ReadOnly=!0,e.Width=50,this.ConfigPreferenceGrid.Columns.push(e),e=new f.O7,e.Header="Name",e.DisplayMember="Name",e.Width=200,this.ConfigPreferenceGrid.Columns.push(e),e=new f.O7,e.Header="Value",e.Width=500,e.DisplayMember="Value",this.ConfigPreferenceGrid.Columns.push(e),e=new f.O7,e.Header="Description",e.Width=500,e.DisplayMember="Description",this.ConfigPreferenceGrid.Columns.push(e),this.ConfigPreferenceGrid.Table=[],this.ConfigPreferenceGrid.TableColumns.push("Sno"),this.ConfigPreferenceGrid.TableColumns.push("ConfigID"),this.ConfigPreferenceGrid.TableColumns.push("Name"),this.ConfigPreferenceGrid.TableColumns.push("Value"),this.ConfigPreferenceGrid.TableColumns.push("Description"),this.GetConfigData()}onBeginEdit(i){let s=this.ConfigPreferenceGrid.Table.indexOf(i.args.item);if(s=-1==s||this.ConfigPreferenceGrid.Table.length-s<3?3:0,this.ConfigPreferenceGrid.CanUserAddRows)for(let a=0;a<s;a++){let g=this.ConfigPreferenceGrid.NewRow();g.Sno=this.ConfigPreferenceGrid.Table.length+1,g.ConfigID=0,this.ConfigPreferenceGrid.addRow(g)}}BeforeRowDeletingContextMenu(i){if(null!=this.SelectedRow&&null!=i&&i.length>=1){let e=[];if(i.forEach(n=>{null!=n&&e.push(n)}),confirm("Are you sure you want to delete?"))for(let n=0;n<e.length;n++){let o=e[n];null!=o&&(""!=r.J0.String(o.ConfigID)&&this.DeletedConfig.push(o.ConfigID.toString()),this.ConfigPreferenceGrid.removeRow(o))}}}UpdateSequence(){this.SNO=1,this.ConfigPreferenceGrid.Table.forEach(i=>{i.Sno=this.SNO++})}GetConfigData(){this.ConfigPreferenceGrid.Table.Clear();let i=l.d.common.getMobilePreferences();if(null!=i&&i.Tables.length>0&&i.Tables[0].length>0)for(let e=0;e<i.Tables[0].length;e++)if(""!=r.J0.String(i.Tables[0][e].Name)){let n=this.ConfigPreferenceGrid.NewRow();""!=r.J0.String(i.Tables[0][e].ConfigID)&&(n.ConfigID=i.Tables[0][e].ConfigID.toString()),n.Name=r.J0.String(i.Tables[0][e].Name),n.Value=r.J0.String(i.Tables[0][e].Value),n.Description=r.J0.String(i.Tables[0][e].Description),n.Sno=this.ConfigPreferenceGrid.Table.length+1,this.ConfigPreferenceGrid.addRow(n)}}OnButtonClick(i){if("Save"==i){this.ConfigPreferenceGrid.angularGrid?.slickGrid&&this.ConfigPreferenceGrid.angularGrid?.slickGrid.getActiveCellNode()&&(this.ConfigPreferenceGrid.angularGrid.slickGrid.getActiveCell(),this.ConfigPreferenceGrid.angularGrid.slickGrid.getEditorLock().commitCurrentEdit());let e=l.d.common.setWebConfigData(this.GetConfigXML());null!=e&&e.Tables.length>0&&e.Tables[e.Tables.length-1].length>0&&e.Columns[e.Columns.length-1].Contains("ErrorMessage")&&(this.MessageVisibility=!0,this.DisplayMessage=e.Tables[e.Tables.length-1][0].ErrorMessage.toString())}else"Refresh"==i?(this.GetConfigData(),this.UpdateSequence(),this.DeletedConfig.Clear()):"Cancel"==i&&l.d.page.HideDialog(this.PopUpGUID)}GetConfigXML(){let i="";for(let e=0;e<this.ConfigPreferenceGrid.Table.length;e++)if(""!=r.J0.String(this.ConfigPreferenceGrid.Table[e].Name)){let n=0;null!=this.ConfigPreferenceGrid.Table[e].ConfigID&&""!=this.ConfigPreferenceGrid.Table[e].ConfigID.toString()&&(n=parseInt(this.ConfigPreferenceGrid.Table[e].ConfigID.toString())),i+=0==n?'<Row Action="NEW"':'<Row Action="MODIFY"',i+=' ConfigID="'+r.J0.String(this.ConfigPreferenceGrid.Table[e].ConfigID)+'"',i+=' Name="'+r.J0.String(this.ConfigPreferenceGrid.Table[e].Name)+'"',i+=' Value="'+r.J0.String(this.ConfigPreferenceGrid.Table[e].Value).Replace('"',"&quot;")+'"',i+=' Description="'+r.J0.String(this.ConfigPreferenceGrid.Table[e].Description)+'"',i+="/>"}for(let e=0;e<this.DeletedConfig.length;e++)""!=r.J0.String(this.DeletedConfig[e])&&(i+='<Row Action="DELETE"',i+=' ConfigID="'+this.DeletedConfig[e].toString()+'"/>');return i.length>0&&(i="<ConfigXML>"+i+"</ConfigXML>"),i.toString()}OnMessageCallBack(){this.res="Yes"}OnConfigPreferenceGridLinkClick(i,e,n){c.RibbonExtViewModel.LoadDocument_VoucherNo(r.J0.String(i[e]))}}}}]);