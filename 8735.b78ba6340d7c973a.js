"use strict";(self.webpackChunkRevenUWebApp=self.webpackChunkRevenUWebApp||[]).push([[8735],{98735:(N,g,o)=>{o.r(g),o.d(g,{MobilePreferencesViewModel:()=>E});var f=o(86739),l=o(8787),m=o(23823),F=o(49710),c=o(18569),y=o(95050),b=o(89417),M=o(31820),D=o(95707),e=o(54438),C=o(60177),T=o(8495),P=o(73955);function G(a,t){if(1&a){const i=e.RV6();e.j41(0,"span",9),e.bIt("click",function(){e.eBV(i);const s=e.XpG();return e.Njj(s.OnButtonClick("Save"))}),e.EFF(1,"\n                    "),e.nrm(2,"i",10),e.EFF(3),e.nI1(4,"translate"),e.k0s()}2&a&&(e.R7$(3),e.JRh(e.bMT(4,1,"Save")))}function k(a,t){if(1&a){const i=e.RV6();e.j41(0,"span",9),e.bIt("click",function(){e.eBV(i);const s=e.XpG();return e.Njj(s.OnButtonClick("Cancel"))}),e.EFF(1,"\n                    "),e.nrm(2,"i",11),e.EFF(3),e.nI1(4,"translate"),e.k0s()}2&a&&(e.R7$(3),e.JRh(e.bMT(4,1,"Cancel")))}function v(a,t){if(1&a&&(e.j41(0,"div"),e.EFF(1,"\n                            "),e.eu8(2,14),e.EFF(3,"\n                        "),e.k0s()),2&a){const i=e.XpG().$implicit,n=e.XpG();e.R7$(2),e.Y8G("obj",i)("group",n.form)}}function S(a,t){if(1&a&&(e.qex(0),e.EFF(1,"\n                    "),e.j41(2,"div",12),e.EFF(3,"\n                        "),e.DNE(4,v,4,2,"div",13),e.EFF(5,"\n                    "),e.k0s(),e.EFF(6,"\n                "),e.bVm()),2&a){const i=t.$implicit;e.R7$(4),e.Y8G("ngIf",i.Visible)}}let R=(()=>{class a{constructor(){this.form=new b.gE({}),this.CurrentRow={},this.formData=[],this.MandatoryFields=new D.bT}ngOnInit(){this.obj=this.params.obj,this.CurrentRow=this.params.CurrentRow,this.prepareMandatoryFields();let i=JSON.parse(this.CurrentRow.Value),n=Object.keys(i);for(let d=0;d<this.MandatoryFields.keys.length;d++){const r=this.MandatoryFields.keys[d];n.Contains(r)||(i[r]=this.MandatoryFields[r])}n=Object.keys(i);for(let d=0;d<n.length;d++){const r=n[d];var s=M.Dw.PactTextBoxData_1(0);s.DBColumnName=r,s.Label=r,s.Text=i[r],s.Visible=!0,s.DataType="TEXT",this.formData.push(s)}}OnButtonClick(i){if("Save"==i){let n={};for(let r=0;r<this.formData.length;r++){const h=this.formData[r];n[h.DBColumnName]=h.Text}let s=JSON.stringify(n);f.d.report.DataSet("ADM006",this.CurrentRow.Name,s),this.obj.GetConfigData()}f.d.page.removeActiveTab()}prepareMandatoryFields(){switch(this.CurrentRow.Name){case"FmTenantDocumentConfiguration":this.MandatoryFields.push("PreferredMinMaxDates","2,1"),this.MandatoryFields.push("PreferredDisabledDays","0"),this.MandatoryFields.push("PreferredEnabledTime","8.1,17.1"),this.MandatoryFields.push("PreferredTimeFormat","24"),this.MandatoryFields.push("dcCCNID159","true"),this.MandatoryFields.push("dcCCNID155","true"),this.MandatoryFields.push("dcCCNID156","true"),this.MandatoryFields.push("dcCCNID157","true"),this.MandatoryFields.push("dcAlpha3","true"),this.MandatoryFields.push("dcAlpha4","true"),this.MandatoryFields.push("dcAlpha5","true"),this.MandatoryFields.push("dcAlpha8","true"),this.MandatoryFields.push("dcAlpha23","true"),this.MandatoryFields.push("dcAlpha24","true"),this.MandatoryFields.push("dcAlpha25","true");break;case"FmSupervisorDocumentConfiguration":this.MandatoryFields.push("MultipleTechnicians","false"),this.MandatoryFields.push("FormVisibility","true"),this.MandatoryFields.push("dcCCNID159","true"),this.MandatoryFields.push("dcCCNID155","false"),this.MandatoryFields.push("dcCCNID156","false"),this.MandatoryFields.push("CustomTechnician","false"),this.MandatoryFields.push("dcCCNID163","true");break;case"FmTechnicianDocumentConfiguration":this.MandatoryFields.push("Start","true"),this.MandatoryFields.push("Hold","true"),this.MandatoryFields.push("Complete","true"),this.MandatoryFields.push("StartAttachments","false"),this.MandatoryFields.push("HoldAttachments","false"),this.MandatoryFields.push("StartRemarks","false"),this.MandatoryFields.push("ResumeRemarks","false"),this.MandatoryFields.push("HoldRemarks","true"),this.MandatoryFields.push("CompleteRemarks","true");break;case"FmDashboardConfig":this.MandatoryFields.push("AddTicket","Add Ticket"),this.MandatoryFields.push("Tickets","Tickets"),this.MandatoryFields.push("PDCs","PDCs"),this.MandatoryFields.push("Dues","Dues"),this.MandatoryFields.push("Artifacts","Artifacts"),this.MandatoryFields.push("NewTicketHeading","New Ticket"),this.MandatoryFields.push("TicketsHeading","Tickets"),this.MandatoryFields.push("TicketDetailsHeading","Feedback Details"),this.MandatoryFields.push("Query","Query FAQ");break;case"FmTicketFormLabels":this.MandatoryFields.push("Feedback","Feedback"),this.MandatoryFields.push("Remarks","Remarks"),this.MandatoryFields.push("SupervisorRemarks","Remarks"),this.MandatoryFields.push("TenantRemarks","Tenant Remarks"),this.MandatoryFields.push("Asset","Asset"),this.MandatoryFields.push("Technician","Technician"),this.MandatoryFields.push("RequestType","Type"),this.MandatoryFields.push("Category","Category"),this.MandatoryFields.push("SubCategory","Sub Category"),this.MandatoryFields.push("ProblemDescription","Problem"),this.MandatoryFields.push("TenantAvailabilityDay","Availability Day"),this.MandatoryFields.push("TenantAvailabilityTimeStart","Availability Time Start"),this.MandatoryFields.push("AlternateMobileNumber","Mobile Number"),this.MandatoryFields.push("EstimatedCost","Estimated Cost"),this.MandatoryFields.push("ChargeableTo","Chargeable To"),this.MandatoryFields.push("Question","FAQ Question"),this.MandatoryFields.push("Answer","FAQ Answer"),this.MandatoryFields.push("Status","Status"),this.MandatoryFields.push("TenantAvailabilityTimeEnd","Availability Time End");break;case"AboutUsConfiguration":this.MandatoryFields.push("IconEnabled","false"),this.MandatoryFields.push("Icon","fa-right"),this.MandatoryFields.push("Title","About us"),this.MandatoryFields.push("BgColor","#000"),this.MandatoryFields.push("TextColor","#fff")}}static#e=this.\u0275fac=function(n){return new(n||a)};static#i=this.\u0275cmp=e.VBU({type:a,selectors:[["app-MobilePreferencesCustomize"]],inputs:{obj:"obj"},decls:30,vars:4,consts:[["id","maincontainer",1,"maincontainer","master_container",2,"display","flex"],[2,"flex-direction","column","justify-content","flex-end","width","100%"],[1,"page-header"],[1,"page-title_div"],[1,"page-title"],[1,"btnMetroDiv","secondary-btn-group"],["class","secondary-btn",3,"click",4,"ngIf"],[1,"PACTHeaderFields","form-row"],[4,"ngFor","ngForOf"],[1,"secondary-btn",3,"click"],[1,"fa-light","fa-floppy-disk-circle-arrow-right"],[1,"fa-light","fa-rectangle-xmark"],[1,"PACTControl","col-md-6","col-sm-12","col-xl-3","col-xs-12","form-group"],[4,"ngIf"],["FieldDirective","",3,"obj","group"]],template:function(n,s){1&n&&(e.j41(0,"div",0),e.EFF(1,"\n    "),e.j41(2,"div",1),e.EFF(3,"\n        "),e.j41(4,"div",2),e.EFF(5,"\n            "),e.j41(6,"div",3),e.EFF(7,"\n                "),e.j41(8,"span",4),e.EFF(9),e.k0s(),e.EFF(10,"\n            "),e.k0s(),e.EFF(11,"\n            "),e.j41(12,"div",5),e.EFF(13,"\n                "),e.DNE(14,G,5,3,"span",6),e.EFF(15,"\n                "),e.DNE(16,k,5,3,"span",6),e.EFF(17,"\n            "),e.k0s(),e.EFF(18,"\n        "),e.k0s(),e.EFF(19,"\n        "),e.j41(20,"div"),e.EFF(21,"\n            "),e.j41(22,"div",7),e.EFF(23,"\n                "),e.DNE(24,S,7,1,"ng-container",8),e.EFF(25,"\n            "),e.k0s(),e.EFF(26,"\n        "),e.k0s(),e.EFF(27,"\n    "),e.k0s(),e.EFF(28,"\n  "),e.k0s(),e.EFF(29,"\n")),2&n&&(e.R7$(9),e.SpI("\n                    ",s.obj.DisplayName,"\n                "),e.R7$(5),e.Y8G("ngIf",s.obj.isConfig),e.R7$(2),e.Y8G("ngIf",!s.obj.isConfig),e.R7$(8),e.Y8G("ngForOf",s.formData))},dependencies:[C.Sq,C.bT,T._,P.D9],encapsulation:2})}return a})();class E extends m.g{get SelectedRow(){return this.ConfigPreferenceGrid.SelectedItem}set SelectedRow(t){t!=this.ConfigPreferenceGrid.SelectedItem&&(this.ConfigPreferenceGrid.SelectedItem=t)}constructor(){super(),this.DeletedConfig=[],this.setGridFocus=!0,this.isConfig=!0,this.SNO=1}MobilePreferencesViewModel_1(t){let i;this.Title=t,this.DisplayName=this.Title,this.ConfigPreferenceGrid=new F.vv,this.ConfigPreferenceGrid.Height=600,this.ConfigPreferenceGrid.BeginEdit.Subscribe(this,"onBeginEdit"),this.ConfigPreferenceGrid.Columns=[],this.ConfigPreferenceGrid.Width="",this.ConfigPreferenceGrid.CanUserAddRows=!0,this.ConfigPreferenceGrid.CanUserDeleteRows=!0,i=new c.O7,i.Header=f.d.GetResource("DocumentDesigner_Sno"),i.DisplayMember="Sno",i.ReadOnly=!0,i.Width=50,this.ConfigPreferenceGrid.Columns.push(i),i=new c.O7,i.Header="Name",i.DisplayMember="Name",i.Width=200,i.ReadOnly=!0,this.ConfigPreferenceGrid.Columns.push(i),i=new c.O7,i.Header="Value",i.Width=500,i.DisplayMember="Value",this.ConfigPreferenceGrid.Columns.push(i),i=new c.O7,i.Header="Description",i.Width=500,i.DisplayMember="Description",this.ConfigPreferenceGrid.Columns.push(i),this.ConfigPreferenceGrid.Table=[],this.ConfigPreferenceGrid.TableColumns.push("Sno"),this.ConfigPreferenceGrid.TableColumns.push("ConfigID"),this.ConfigPreferenceGrid.TableColumns.push("Name"),this.ConfigPreferenceGrid.TableColumns.push("Value"),this.ConfigPreferenceGrid.TableColumns.push("Description"),this.GetConfigData()}onBeginEdit(t){let n=t.args.item,d=t.args.column.DgCol;var r=[];if(r.push("FmTenantDocumentConfiguration"),r.push("FmSupervisorDocumentConfiguration"),r.push("FmTechnicianDocumentConfiguration"),r.push("Fm_Request"),r.push("FmDashboardConfig"),r.push("FmTicketFormLabels"),r.push("AboutUsConfiguration"),r.Contains(n.Name)&&"Value"==d.DisplayMember)return void f.d.page.addNewTab({title:n.Name,component:R,params:{obj:this,CurrentRow:n}});let h=this.ConfigPreferenceGrid.Table.indexOf(n);if(h=-1==h||this.ConfigPreferenceGrid.Table.length-h<3?3:0,this.ConfigPreferenceGrid.CanUserAddRows)for(let p=0;p<h;p++){let u=this.ConfigPreferenceGrid.NewRow();u.Sno=this.ConfigPreferenceGrid.Table.length+1,u.ConfigID=0,this.ConfigPreferenceGrid.addRow(u)}}BeforeRowDeletingContextMenu(t){if(null!=this.SelectedRow&&null!=t&&t.length>=1){let i=[];if(t.forEach(n=>{null!=n&&i.push(n)}),confirm("Are you sure you want to delete?"))for(let n=0;n<i.length;n++){let s=i[n];null!=s&&(""!=l.J0.String(s.ConfigID)&&this.DeletedConfig.push(s.ConfigID.toString()),this.ConfigPreferenceGrid.removeRow(s))}}}UpdateSequence(){this.SNO=1,this.ConfigPreferenceGrid.Table.forEach(t=>{t.Sno=this.SNO++})}GetConfigData(){this.ConfigPreferenceGrid.Table.Clear();let t=f.d.common.getMobilePreferences();if(null!=t&&t.Tables.length>0&&t.Tables[0].length>0)for(let i=0;i<t.Tables[0].length;i++)if(""!=l.J0.String(t.Tables[0][i].Name)){let n=this.ConfigPreferenceGrid.NewRow();""!=l.J0.String(t.Tables[0][i].ConfigID)&&(n.ConfigID=t.Tables[0][i].ConfigID.toString()),n.Name=l.J0.String(t.Tables[0][i].Name),n.Value=l.J0.String(t.Tables[0][i].Value),n.Description=l.J0.String(t.Tables[0][i].Description),n.Sno=this.ConfigPreferenceGrid.Table.length+1,this.ConfigPreferenceGrid.addRow(n)}}OnButtonClick(t){if("Save"==t){this.ConfigPreferenceGrid.angularGrid?.slickGrid&&this.ConfigPreferenceGrid.angularGrid?.slickGrid.getActiveCellNode()&&(this.ConfigPreferenceGrid.angularGrid.slickGrid.getActiveCell(),this.ConfigPreferenceGrid.angularGrid.slickGrid.getEditorLock().commitCurrentEdit());let i=f.d.common.setMobilePreferencesData(this.GetConfigXML());null!=i&&i.Tables.length>0&&i.Tables[i.Tables.length-1].length>0&&i.Columns[i.Columns.length-1].Contains("ErrorMessage")&&(this.MessageVisibility=!0,this.DisplayMessage=i.Tables[i.Tables.length-1][0].ErrorMessage.toString())}else"Refresh"==t?(this.GetConfigData(),this.UpdateSequence(),this.DeletedConfig.Clear()):"Cancel"==t&&f.d.page.HideDialog(this.PopUpGUID)}GetConfigXML(){let t="";for(let i=0;i<this.ConfigPreferenceGrid.Table.length;i++)if(""!=l.J0.String(this.ConfigPreferenceGrid.Table[i].Name)){let n=0;null!=this.ConfigPreferenceGrid.Table[i].ConfigID&&""!=this.ConfigPreferenceGrid.Table[i].ConfigID.toString()&&(n=parseInt(this.ConfigPreferenceGrid.Table[i].ConfigID.toString())),t+=0==n?'<Row Action="NEW"':'<Row Action="MODIFY"',t+=' ConfigID="'+l.J0.String(this.ConfigPreferenceGrid.Table[i].ConfigID)+'"',t+=' Name="'+l.J0.String(this.ConfigPreferenceGrid.Table[i].Name)+'"',t+=' Value="'+l.J0.String(this.ConfigPreferenceGrid.Table[i].Value).Replace('"',"&quot;")+'"',t+=' Description="'+l.J0.String(this.ConfigPreferenceGrid.Table[i].Description)+'"',t+="/>"}for(let i=0;i<this.DeletedConfig.length;i++)""!=l.J0.String(this.DeletedConfig[i])&&(t+='<Row Action="DELETE"',t+=' ConfigID="'+this.DeletedConfig[i].toString()+'"/>');return t.length>0&&(t="<ConfigXML>"+t+"</ConfigXML>"),t.toString()}OnMessageCallBack(){this.res="Yes"}OnConfigPreferenceGridLinkClick(t,i,n){y.RibbonExtViewModel.LoadDocument_VoucherNo(l.J0.String(t[i]))}}}}]);